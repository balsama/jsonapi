services:
  serializer.normalizer.entity_reference_item.jsonapi:
    class: Drupal\jsonapi\Normalizer\EntityReferenceItemNormalizer
    arguments: ['@jsonapi.resource.manager']
    calls:
      - [setContainer, ['@service_container']]
    tags:
      - { name: normalizer, priority: 21 }
  serializer.normalizer.field_item.jsonapi:
    class: Drupal\jsonapi\Normalizer\FieldItemNormalizer
    tags:
      - { name: normalizer, priority: 21 }
  serializer.normalizer.scalar.jsonapi:
    class: Drupal\jsonapi\Normalizer\ScalarNormalizer
    tags:
      - { name: normalizer, priority: 5 }
  serializer.normalizer.field.jsonapi:
    class: Drupal\jsonapi\Normalizer\FieldNormalizer
    tags:
      - { name: normalizer, priority: 21 }
  serializer.normalizer.entity_reference_field.jsonapi:
    class: Drupal\jsonapi\Normalizer\EntityReferenceFieldNormalizer
    tags:
      - { name: normalizer, priority: 31 }
    arguments: ['@jsonapi.link_manager', '@entity_field.manager', '@plugin.manager.field.field_type', '@jsonapi.resource.manager']
  serializer.normalizer.entity.jsonapi:
    class: Drupal\jsonapi\Normalizer\ContentEntityNormalizer
    arguments: ['@jsonapi.link_manager', '@jsonapi.current_context']
    tags:
      - { name: normalizer, priority: 21 }
  serializer.normalizer.config_entity.jsonapi:
    class: Drupal\jsonapi\Normalizer\ConfigEntityNormalizer
    arguments: ['@jsonapi.link_manager', '@jsonapi.current_context']
    tags:
      - { name: normalizer, priority: 21 }
  serializer.normalizer.document_root.jsonapi:
    class: Drupal\jsonapi\Normalizer\DocumentRootNormalizer
    arguments: ['@jsonapi.link_manager', '@jsonapi.current_context']
    tags:
      - { name: normalizer, priority: 22 }
  serializer.encoder.jsonapi:
    class: Drupal\jsonapi\Encoder\JsonEncoder
    tags:
      - { name: encoder, priority: 21, format: 'api_json' }
  jsonapi.resource.manager:
    class: Drupal\jsonapi\Configuration\ResourceManager
    arguments: ['@entity_type.manager', '@entity_type.bundle.info', '@config.factory']
  jsonapi.route_enhancer:
    class: Drupal\jsonapi\Routing\RouteEnhancer
    tags:
      - { name: route_enhancer }
  jsonapi.params.enhancer:
    class: Drupal\jsonapi\Routing\JsonApiParamEnhancer
    arguments: ['@entity_field.manager']
    tags:
      - { name: route_enhancer }
  jsonapi.query_builder:
    class: Drupal\jsonapi\Query\QueryBuilder
    arguments: ['@entity_type.manager', '@jsonapi.current_context', '@jsonapi.field_resolver']
  jsonapi.link_manager:
    class: Drupal\jsonapi\LinkManager\LinkManager
    arguments: ['@router.no_access_checks', '@url_generator']
  jsonapi.current_context:
    class: Drupal\jsonapi\Context\CurrentContext
    arguments: ['@jsonapi.resource.manager', '@request_stack']
  jsonapi.field_resolver:
    class: Drupal\jsonapi\Context\FieldResolver
    arguments: ['@jsonapi.current_context', '@entity_field.manager']
